<script>
    document.getElementById("bookingForm").addEventListener("submit", function(event) {
        event.preventDefault();

        let name = document.getElementById("name").value;
        let phone = document.getElementById("phone").value;
        let email = document.getElementById("email").value;
        let date = document.getElementById("date").value;
        let time = document.getElementById("time").value;

        if (!email.includes("@") || !email.includes(".")) {
            alert("❌ Введіть коректний email!");
            return;
        }

        let formData = {
            "name": name,
            "phone": phone,
            "email": email, 
            "date": date,
            "time": time
        };

        fetch("https://script.google.com/macros/s/AKfycby0lU_vRBEo0kEDqY-xZ7pqYTbv43sNcxlXUOkg7AgthCjN0s7At_3IJh8G3ek-1_I2/exec", { 
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(formData)
        })
        .then(response => response.json()) 
        .then(data => {
            if (data.status === "full") {
                alert("⚠️ Цей час вже зайнятий! Оберіть інший.");
            } else if (data.status === "success") {
                document.getElementById("successMessage").style.display = "block";
                document.getElementById("bookingForm").reset();
            } else {
                alert("❌ Сталася помилка! Спробуйте ще раз.");
            }
        })
        .catch(error => {
            console.error("Помилка при відправці форми!", error);
            alert("❌ Сталася помилка! Спробуйте ще раз.");
        });
    });
</script>
